export function readPackageLockJson({ json, production }) {
    const filterForActualDependencies = (([directory]) => !!directory);
    const filterOutOptionals = (([, { optional }]) => !optional);
    const filterDevDependencies = (production
        ? ([, details]) => !details.dev
        : () => true);
    return Object.entries(json.packages)
        .filter(filterForActualDependencies)
        .filter(filterOutOptionals)
        .filter(filterDevDependencies)
        .map(([directory, { version }]) => {
        const parents = directory
            .split(/\/?node_modules\/?/)
            .filter(s => s.length > 0);
        const label = parents.pop();
        return {
            label,
            version,
            parents,
        };
    });
}
//# sourceMappingURL=read-package-lock-json.js.map